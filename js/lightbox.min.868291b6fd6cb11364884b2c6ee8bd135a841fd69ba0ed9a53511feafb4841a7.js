document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("lightbox");if(!e)return;const i=e.querySelector(".lb-image"),r=e.querySelector(".lb-caption"),v=e.querySelector(".lb-loader"),f=e.querySelector(".lb-close"),m=e.querySelector(".lb-prev"),h=e.querySelector(".lb-next");let o=[],t=0,s=!1;function p(t,n){s=!0,e.classList.remove("is-loaded");const o=new Image;o.onload=()=>{i.src=t,r.textContent=n,e.classList.add("is-loaded"),s=!1},o.onerror=()=>{e.classList.add("is-loaded"),r.textContent="Impossible de charger lâ€™image",s=!1},o.src=t}function n(n){if(s)return;t=(n+o.length)%o.length;const i=o[t],a=i.dataset.src,r=i.dataset.caption||i.dataset.label||"";if(!a)return;e.hidden=!1,document.body.style.overflow="hidden",p(a,r)}function a(){e.hidden=!0,i.src="",e.classList.remove("is-loaded"),document.body.style.overflow=""}document.addEventListener("click",e=>{const s=e.target.closest("[data-lightbox]");if(!s||!s.dataset.src)return;e.preventDefault();const i=s.dataset.lightbox;o=[...document.querySelectorAll(`[data-lightbox="${i}"][data-src]`)],t=o.indexOf(s),n(t)}),f?.addEventListener("click",a),m?.addEventListener("click",()=>n(t-1)),h?.addEventListener("click",()=>n(t+1)),e.addEventListener("click",t=>{t.target===e&&a()}),document.addEventListener("keydown",s=>{if(e.hidden)return;s.key==="Escape"&&a(),s.key==="ArrowLeft"&&n(t-1),s.key==="ArrowRight"&&n(t+1)});let c=0,l=0;const g=50;function d(t){if(e.hidden||s)return;if(!t.touches||t.touches.length!==1)return;c=t.touches[0].clientX}function u(o){if(e.hidden||s)return;if(!o.changedTouches||o.changedTouches.length!==1)return;l=o.changedTouches[0].clientX;const i=l-c;if((i<0?-i:i)<g)return;n(i>0?t-1:t+1)}e.addEventListener("touchstart",d,{passive:!0}),e.addEventListener("touchend",u),i?.addEventListener("touchstart",d,{passive:!0}),i?.addEventListener("touchend",u)})