document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("lightbox");if(!e)return;const o=e.querySelector(".lb-image"),r=e.querySelector(".lb-caption"),g=e.querySelector(".lb-loader"),f=e.querySelector(".lb-close"),h=e.querySelector(".lb-prev"),u=e.querySelector(".lb-next");let s=[],t=0;function m(t,n){e.classList.remove("is-loaded");const s=new Image;s.onload=()=>{o.src=t,r.textContent=n,e.classList.add("is-loaded")},s.onerror=()=>{e.classList.add("is-loaded"),r.textContent="Impossible de charger lâ€™image"},s.src=t}function n(n){t=(n+s.length)%s.length;const o=s[t],i=o.dataset.src,a=o.dataset.caption||o.dataset.label||"";if(!i)return;e.hidden=!1,document.body.style.overflow="hidden",m(i,a)}function i(){e.hidden=!0,o.src="",e.classList.remove("is-loaded"),document.body.style.overflow=""}document.addEventListener("click",e=>{const o=e.target.closest("[data-lightbox]");if(!o||!o.dataset.src)return;e.preventDefault();const i=o.dataset.lightbox;s=[...document.querySelectorAll(`[data-lightbox="${i}"][data-src]`)],t=s.indexOf(o),n(t)}),f?.addEventListener("click",i),h?.addEventListener("click",()=>n(t-1)),u?.addEventListener("click",()=>n(t+1)),e.addEventListener("click",t=>{t.target===e&&i()}),document.addEventListener("keydown",s=>{if(e.hidden)return;s.key==="Escape"&&i(),s.key==="ArrowLeft"&&n(t-1),s.key==="ArrowRight"&&n(t+1)});let a=0,c=0;const p=50;function l(t){if(e.hidden)return;if(!t.touches||t.touches.length!==1)return;a=t.touches[0].clientX}function d(s){if(e.hidden)return;if(!s.changedTouches||s.changedTouches.length!==1)return;c=s.changedTouches[0].clientX;const o=c-a;if((o<0?-o:o)<p)return;n(o>0?t-1:t+1)}e.addEventListener("touchstart",l,{passive:!0}),e.addEventListener("touchend",d),o?.addEventListener("touchstart",l,{passive:!0}),o?.addEventListener("touchend",d)})