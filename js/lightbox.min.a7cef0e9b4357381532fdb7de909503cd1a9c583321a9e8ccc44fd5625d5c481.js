document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("lightbox");if(!e)return;const i=e.querySelector(".lb-image"),a=e.querySelector(".lb-caption"),u=e.querySelector(".lb-loader"),r=e.querySelector(".lb-close"),c=e.querySelector(".lb-prev"),l=e.querySelector(".lb-next");let n=[],t=0;function d(t,n){e.classList.remove("is-loaded");const s=new Image;s.onload=()=>{i.src=t,a.textContent=n,e.classList.add("is-loaded")},s.onerror=()=>{e.classList.add("is-loaded"),a.textContent="Impossible de charger lâ€™image"},s.src=t}function s(s){t=(s+n.length)%n.length;const o=n[t],i=o.dataset.src,a=o.dataset.caption||o.dataset.label||"";if(!i)return;e.hidden=!1,document.body.style.overflow="hidden",d(i,a)}function o(){e.hidden=!0,i.src="",e.classList.remove("is-loaded"),document.body.style.overflow=""}document.addEventListener("click",e=>{const o=e.target.closest("[data-lightbox]");if(!o||!o.dataset.src)return;e.preventDefault();const i=o.dataset.lightbox;n=[...document.querySelectorAll(`[data-lightbox="${i}"][data-src]`)],t=n.indexOf(o),s(t)}),r?.addEventListener("click",o),c?.addEventListener("click",()=>s(t-1)),l?.addEventListener("click",()=>s(t+1)),e.addEventListener("click",t=>{t.target===e&&o()}),document.addEventListener("keydown",n=>{if(e.hidden)return;n.key==="Escape"&&o(),n.key==="ArrowLeft"&&s(t-1),n.key==="ArrowRight"&&s(t+1)})})