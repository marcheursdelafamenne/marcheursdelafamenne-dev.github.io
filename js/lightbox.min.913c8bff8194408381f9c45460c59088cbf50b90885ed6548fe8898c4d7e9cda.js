document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("lightbox");if(!e)return;const r=e.querySelector(".lb-image"),a=e.querySelector(".lb-caption"),p=e.querySelector(".lb-loader"),u=e.querySelector(".lb-close"),d=e.querySelector(".lb-prev"),l=e.querySelector(".lb-next");let s=[],t=0;function h(t,n){e.classList.remove("is-loaded");const s=new Image;s.onload=()=>{r.src=t,a.textContent=n,e.classList.add("is-loaded")},s.onerror=()=>{e.classList.add("is-loaded"),a.textContent="Impossible de charger lâ€™image"},s.src=t}function n(n){t=(n+s.length)%s.length;const o=s[t],i=o.dataset.src,a=o.dataset.caption||o.dataset.label||"";if(!i)return;e.hidden=!1,document.body.style.overflow="hidden",h(i,a)}function o(){e.hidden=!0,r.src="",e.classList.remove("is-loaded"),document.body.style.overflow=""}document.addEventListener("click",e=>{const o=e.target.closest("[data-lightbox]");if(!o||!o.dataset.src)return;e.preventDefault();const i=o.dataset.lightbox;s=[...document.querySelectorAll(`[data-lightbox="${i}"][data-src]`)],t=s.indexOf(o),n(t)}),u?.addEventListener("click",o),d?.addEventListener("click",()=>n(t-1)),l?.addEventListener("click",()=>n(t+1)),e.addEventListener("click",t=>{t.target===e&&o()}),document.addEventListener("keydown",s=>{if(e.hidden)return;s.key==="Escape"&&o(),s.key==="ArrowLeft"&&n(t-1),s.key==="ArrowRight"&&n(t+1)});let i=0,c=0;const m=50;e.addEventListener("touchstart",t=>{if(e.hidden)return;i=t.touches[0].clientX},{passive:!0}),e.addEventListener("touchend",t=>{if(e.hidden)return;c=t.changedTouches[0].clientX,f()},{passive:!0});function f(){const e=c-i;if((e<0?-e:e)<m)return;n(e>0?t-1:t+1)}})